{"version":3,"sources":["src/app.es6"],"names":[],"mappings":"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","file":"script.js","sourcesContent":["$( document ).ready(() => {\n\n\t//GLOBAL variables\n\tconst dateStrToYear = d3.time.format(\"%Y\").parse;\n\tvar yearsDomain, votesDomain, allGenres;\n   \n    //Load JSON-encoded data using a GET HTTP request\n\tfunction getData(url) {\n      \treturn $.getJSON(url); \n    }\n\n    //Class declaration\n\tclass MovieViz {\n\n\t    constructor(opts) {\n\t        this.element = opts.element;\n\t        this.data = opts.data;\n\t        this.xDomain = opts.xDomain;\n\t        this.xScaleType = opts.xScaleType;\n\t        this.yDomain = opts.yDomain;\n\t        this.chartHeight = opts.chartHeight;\n\t        this.genres = opts.genres;\n\n\t        this.draw();\n\t    }\n\n\t    draw () {\n\n\t        this.chartWidth = $(this.element).width();\n\t      \n\t        // define width, height with the margin\n\t        this.margin = {\n\t            top: 5,\n\t            right: 10,\n\t            bottom: 20,\n\t            left: 40\n\t        };\n\t        this.width = this.chartWidth - this.margin.left - this.margin.right;\n\t        this.height = this.chartHeight - this.margin.top - this.margin.bottom;\n\t        \n\t        // set up parent element and SVG\n\t        this.element.innerHTML = '';\n\t        var svg = d3.select(this.element).append('svg');\n\t        svg.attr('width',  this.width + this.margin.left + this.margin.right);\n\t        svg.attr('height', this.height + this.margin.top + this.margin.bottom);\n\n\t        // we'll actually be appending to a <g class='baseGroup'> element\n\t        this.baseGroup = svg\n\t          .append('g')\n\t          .attr(\"class\", \"baseGroup\")\n\t          .attr('transform','translate('+this.margin.left+','+this.margin.top+')');\n\n\t        this.baseGroup.append(\"text\")\n\t        \t.text(\"Rating\")\n\t        \t.style(\"text-anchor\", \"middle\")\n     \t\t\t.attr(\"dx\", (this.height/2)*-1)\n     \t\t\t.attr(\"dy\", \"-30\")\n\t        \t.attr(\"transform\", \"rotate(-90)\");;\n\n\t        // create the other stuff\n\t\t    this.createYaxis();\n\t\t    this.createXaxis();\n\t\t    this.createCircles();\n\t\t}\n\n\t\tcreateYaxis () {\n\t\t\t//y scale to be used in y axis\n        \tthis.yScale = d3.scale.linear()\n            \t.range([this.height, 0])\n            \t.domain(this.yDomain);\n\n        \t// create axis element\n\t        var yAxis = d3.svg.axis()\n\t            .scale(this.yScale)\n\t            .tickSize(-this.width)\n\t            .orient(\"left\");\n\n\t        //add the y axis to the main chart\n\t        this.baseGroup\n\t          \t.append(\"g\")\n\t          \t.attr(\"class\", \"y axis\")\n\t          \t.call(yAxis);\n\n\t\t}\n\n\t\tcreateXaxis () {\n\n\t\t\td3.select(\"g.x.axis\").remove();\n\n\t\t\t// x scale to be used in x axis\n\t\t\tif(this.xScaleType == 'year'){\n\t\t\t\tthis.xScale = d3.time.scale()\n\t            \t.range([0, this.width])\n\t            \t.domain(this.xDomain);\n\t\t\t}else{\n\t\t\t\tthis.xScale = d3.scale.linear()\n\t\t\t\t\t.range([0, this.width])\n\t            \t.domain(this.xDomain);\n\t\t\t}\n\n            // create axis element\n\t        var xAxis = d3.svg.axis()\n\t            .scale(this.xScale)\n\t            .orient(\"bottom\");\n\n\t        // add the x axis to the chart\n\t        this.baseGroup\n\t            .append(\"g\")\n\t            .attr(\"class\", \"x axis\")\n\t            .attr(\"transform\", \"translate(0,\" + this.height + \")\")\n\t            .call(xAxis);\n\t\t}\n\n\t\tcreateCircles() {\n\n\t\t\td3.selectAll(\"circle.movie-circle\").remove();\n\n\t\t\tvar circlesData = [];\n\n\t\t\tif(this.genres !== allGenres){\n\t\t\t\tthis.data.forEach(y => {\n\t\t\t\t\tvar hasgenre = y.genres.find(x => x === this.genres);\n\t\t\t\t\tif(hasgenre){\n\t\t\t\t\t\tcirclesData.push(y);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tcirclesData = this.data;\n\t\t\t}\n\n\t\t\tthis.baseGroup.selectAll(\"circle\")\n\t\t        .data(circlesData)\n\t\t        .enter()\n\t\t        .append(\"circle\")\n\t\t        .attr(\"class\", \"movie-circle\") \n\t\t        .attr(\"genre\", this.genres)\n\t\t        .attr(\"cy\", d =>  this.yScale(d.rating)  )\n\t\t        .attr(\"cx\", d => this.xScale(d[this.xScaleType])  )\n\t\t        .attr(\"r\", 5);\n\n\t\t}\n\n\t\tmoveCircles(){\n\n\t\t\td3.selectAll(\"circle.movie-circle\")\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr(\"cx\", d => this.xScale(d[this.xScaleType]));\n\t\t}\n\t}\n\n\tgetData('./admin/movies.json')\n    // then() method takes to params: callback functions for the success and failure cases of the Promise\n    .then(function(data) {\n    \t// years get parse into data objects for d3.js\n    \t// turn voes and ratings to numbers from strings\n    \tdata.movies.forEach(obj => {\n    \t\tobj.year = dateStrToYear(obj.year);\n    \t\tobj.rating = +obj.rating;\n    \t\tobj.votes = +obj.votes;\n    \t});\n    \tconsole.log(data);\n\t    // add the total number of movies to the dek\n\t    $(\".dek span\").html(data.movies.length);\n\t    // assign these global variables\n\t    yearsDomain = [dateStrToYear(data.yearRange[0].toString()),dateStrToYear(data.yearRange[1].toString())];\n\t    votesDomain = data.votesRange;\n\t    allGenres = data.genres;\n\t    // create a new data viz object\n\t    const testMovieViz = new MovieViz({\n\t\t\telement: document.querySelector('#viz'),\n\t\t\tdata: data.movies,\n\t\t\txDomain: yearsDomain, // or votesDomain\n\t\t\txScaleType: 'year', // or 'votes'\n\t\t\tyDomain: [1,10],\n\t\t\tchartHeight: 350,\n\t\t\tgenres: 'mystery'\n\t\t});\n\n\t\ttestMovieViz.genres = 'comedy';\n\t\ttestMovieViz.createCircles();\n\n\t\ttestMovieViz.xScaleType = 'votes';\n\t\ttestMovieViz.xDomain = votesDomain;\n\t\ttestMovieViz.createXaxis();\n\t\ttestMovieViz.moveCircles();\n    });\n});\n\n"]}