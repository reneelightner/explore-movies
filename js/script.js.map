{"version":3,"sources":["src/app.es6"],"names":[],"mappings":"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","file":"script.js","sourcesContent":["$( document ).ready(() => {\n\n\t//GLOBAL variables\n\tconst dateStrToYear = d3.time.format(\"%Y\").parse;\n\tvar yearsDomain, votesDomain, allGenres;\n\tvar testMovieViz;\n   \n    //Load JSON-encoded data using a GET HTTP request\n\tfunction getData(url) {\n      \treturn $.getJSON(url); \n    }\n\n    //Class declaration for a visualization instance\n\tclass MovieViz {\n\n\t    constructor(opts) {\n\t        this.element = opts.element;\n\t        this.data = opts.data;\n\t        this.xDomain = opts.xDomain;\n\t        this.xScaleType = opts.xScaleType;\n\t        this.yDomain = opts.yDomain;\n\t        this.chartHeight = opts.chartHeight;\n\t        this.genres = opts.genres;\n\n\t        this.draw();\n\t    }\n\n\t    draw () {\n\n\t        this.chartWidth = $(this.element).width();\n\t      \n\t        // define width, height with the margin\n\t        this.margin = {\n\t            top: 5,\n\t            right: 150,\n\t            bottom: 20,\n\t            left: 40\n\t        };\n\t        this.width = this.chartWidth - this.margin.left - this.margin.right;\n\t        this.height = this.chartHeight - this.margin.top - this.margin.bottom;\n\t        \n\t        // set up parent element and SVG\n\t        this.element.innerHTML = '';\n\t        var svg = d3.select(this.element).append('svg');\n\t        svg.attr('width',  this.width + this.margin.left + this.margin.right);\n\t        svg.attr('height', this.height + this.margin.top + this.margin.bottom);\n\n\t        // we'll actually be appending to a <g class='baseGroup'> element\n\t        this.baseGroup = svg\n\t          .append('g')\n\t          .attr(\"class\", \"baseGroup\")\n\t          .attr('transform','translate('+this.margin.left+','+this.margin.top+')');\n\n\t        // 'rating' label\n\t        this.baseGroup.append(\"text\")\n\t        \t.text(\"IMDB Rating\")\n\t        \t.style(\"text-anchor\", \"middle\")\n     \t\t\t.attr(\"dx\", (this.height/2)*-1)\n     \t\t\t.attr(\"dy\", \"-30\")\n\t        \t.attr(\"transform\", \"rotate(-90)\");\n\n\t        // create the other stuff\n\t\t    this.createYaxis();\n\t\t    this.createXaxis();\n\t\t    this.createCircles();\n\t\t}\n\n\t\tcreateYaxis () {\n\t\t\t// y scale to be used in y axis\n        \tthis.yScale = d3.scale.linear()\n            \t.range([this.height, 0])\n            \t.domain(this.yDomain);\n\n        \t// create axis element\n\t        var yAxis = d3.svg.axis()\n\t            .scale(this.yScale)\n\t            .tickSize(-this.width)\n\t            .orient(\"left\");\n\n\t        // add the y axis to the main chart\n\t        this.baseGroup\n\t          \t.append(\"g\")\n\t          \t.attr(\"class\", \"y axis\")\n\t          \t.call(yAxis);\n\n\t\t}\n\n\t\tcreateXaxis () {\n\n\t\t\td3.select(\"g.x.axis\").remove();\n\n\t\t\t// x scale to be used in x axis\n\t\t\tif(this.xScaleType == 'year'){\n\t\t\t\tthis.xScale = d3.time.scale()\n\t            \t.range([0, this.width])\n\t            \t.domain(this.xDomain);\n\t\t\t}else{\n\t\t\t\tthis.xScale = d3.scale.linear()\n\t\t\t\t\t.range([0, this.width])\n\t            \t.domain(this.xDomain);\n\t\t\t}\n\n            // create axis element\n\t        var xAxis = d3.svg.axis()\n\t            .scale(this.xScale)\n\t            .orient(\"bottom\");\n\n\t        // add the x axis to the chart\n\t        this.baseGroup\n\t            .append(\"g\")\n\t            .attr(\"class\", \"x axis\")\n\t            .attr(\"transform\", \"translate(0,\" + this.height + \")\")\n\t            .call(xAxis);\n\t\t}\n\n\t\tcreateCircles() {\n\n\t\t\t// remove all previous circles and hover text\n\t\t\td3.selectAll(\"circle.movie-circle\").remove();\n\t\t\td3.select(\"text.hover-text\").remove();\n\n\t\t\t//filter the circle data\n\t\t\tvar circlesData = [];\n\t\t\tif(this.genres !== 'all'){\n\t\t\t\tthis.data.forEach(y => {\n\t\t\t\t\tvar hasgenre = y.genres.find(x => x === this.genres);\n\t\t\t\t\tif(hasgenre){\n\t\t\t\t\t\tcirclesData.push(y);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tcirclesData = this.data;\n\t\t\t}\n\n\t\t\tvar mouseover = (circleIndex) => {\n\t\t\t\td3.select(\"text.hover-text\")\n\t\t\t\t\t.attr(\"opacity\", 1)\n\t\t\t\t\t.text(circlesData[circleIndex].title)\n\t\t\t\t\t.attr(\"dx\", () => this.xScale(circlesData[circleIndex][this.xScaleType])+5)\n\t\t\t\t\t.attr(\"dy\", () => this.yScale(circlesData[circleIndex].rating));\n\t\t\t};\n\n\t\t\tvar mouseout = (circleIndex) => {\n\t\t\t\td3.select(\"text.hover-text\")\n\t\t\t\t\t.attr(\"opacity\", 0);\n\t\t\t};\n\n\t\t\t// add circles\n\t\t\tthis.baseGroup.selectAll(\"circle\")\n\t\t        .data(circlesData)\n\t\t        .enter()\n\t\t        .append(\"circle\")\n\t\t        .attr(\"class\", \"movie-circle\") \n\t\t        .attr(\"genre\", this.genres)\n\t\t        .attr(\"cy\", d =>  this.yScale(d.rating)  )\n\t\t        .attr(\"cx\", d => this.xScale(d[this.xScaleType])  )\n\t\t        .attr(\"r\", 5)\n\t\t        .on(\"mouseover\", (d,i) => mouseover(i))\n\t\t        .on(\"mouseout\", (d,i) => mouseout(i));\n\n\t\t    this.baseGroup.append(\"text\")\n\t        \t.attr(\"class\", \"hover-text\");    \n\t\t}\n\n\t\tmoveCircles(){\n\n\t\t\t// move circles to their new position according to the new x axis/scale\n\t\t\td3.selectAll(\"circle.movie-circle\")\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr(\"cx\", d => this.xScale(d[this.xScaleType]));\n\t\t}\n\t}\n\n\t// adding buttons/listeners for filterign by genre and adjusting the x-axis\n\tfunction makeButtons(genres){\n\n\t\t$(\".genres-buttons\").append(\"<button class='btn btn-default btn-primary btn-xs' genre='all'>ALL</button>\");\n\n\t\tfor(let genre of genres){\n\t\t\t$(\".genres-buttons\").append(\"<button class='btn btn-default btn-xs' genre=\"+genre+\">\"+genre+\"</button>\");\n\t\t}\n\n\t\t$(\".genres-buttons button.btn\").on(\"click\", function(){\n\t\t\t$(\".genres-buttons button.btn\").removeClass('btn-primary');\n\t\t\t$(this).addClass('btn-primary');\n\t\t\tlet theGenreClicked = $(this).attr('genre');\n\t\t\ttestMovieViz.genres = theGenreClicked;\n\t\t\ttestMovieViz.createCircles();\n\t\t});\n\n\t\t$(\".xaxis-buttons button.btn\").on(\"click\", function(){\n\t\t\t$(\".xaxis-buttons button.btn\").removeClass('btn-primary');\n\t\t\t$(this).addClass('btn-primary');\n\t\t\tlet thexAxisClicked = $(this).attr('xaxis');\n\t\t\ttestMovieViz.xScaleType = thexAxisClicked;\n\t\t\ttestMovieViz.xDomain = thexAxisClicked == 'votes' ? votesDomain : yearsDomain;\n\t\t\ttestMovieViz.createXaxis();\n\t\t\ttestMovieViz.moveCircles();\n\t\t});\n\n\t}\n\n\n\tgetData('./admin/movies.json')\n    // then() method takes to params: callback functions for the success and failure cases of the Promise\n    .then((data) => {\n    \t// years get parse into data objects for d3.js\n    \t// turn voes and ratings to numbers from strings\n    \tdata.movies.forEach(obj => {\n    \t\tobj.year = dateStrToYear(obj.year);\n    \t\tobj.rating = +obj.rating;\n    \t\tobj.votes = +obj.votes;\n    \t});\n\t    // add the total number of movies to the dek\n\t    $(\".dek span\").html(data.movies.length);\n\t    // assign these global variables\n\t    yearsDomain = [dateStrToYear(data.yearRange[0].toString()),dateStrToYear(data.yearRange[1].toString())];\n\t    votesDomain = data.votesRange;\n\t    allGenres = data.genres;\n\t    // create a new data viz object\n\t    testMovieViz = new MovieViz({\n\t\t\telement: document.querySelector('#viz'),\n\t\t\tdata: data.movies,\n\t\t\txDomain: yearsDomain, // or votesDomain\n\t\t\txScaleType: 'year', // or 'votes'\n\t\t\tyDomain: [1,10],\n\t\t\tchartHeight: 350,\n\t\t\tgenres: 'all'\n\t\t});\n\t    // make the buttons and add their click listener\n\t\tmakeButtons(allGenres);\n    });\n\n});\n\n"]}